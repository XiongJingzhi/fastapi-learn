{
  "openapi": "3.1.0",
  "info": {
    "title": "FastAPI ä¾èµ–æ³¨å…¥åŸºç¡€",
    "description": "æ¼”ç¤ºä¾èµ–æ³¨å…¥çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•",
    "version": "2.0.0"
  },
  "paths": {
    "/level1/users/{user_id}": {
      "get": {
        "summary": "Get User Level1",
        "description": "âŒ Level 1 çš„å…¸å‹é—®é¢˜ï¼šæ²¡æœ‰ä¾èµ–æ³¨å…¥\n\né—®é¢˜åˆ†æï¼š\n1. Endpoint ç›´æ¥æ“ä½œ\"æ•°æ®åº“\"ï¼ˆfake_db_level1ï¼‰\n2. æ— æ³•åœ¨ CLI å·¥å…·ä¸­å¤ç”¨è¿™ä¸ªé€»è¾‘\n3. éš¾ä»¥æµ‹è¯•ï¼ˆå¿…é¡»å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼‰\n4. ä¸šåŠ¡é€»è¾‘æ··åœ¨ä¼ è¾“å±‚\n\nå®é™…é¡¹ç›®ä¸­çš„é—®é¢˜ï¼š\n- å¦‚æœæ¢æ•°æ®åº“ï¼Œéœ€è¦ä¿®æ”¹æ‰€æœ‰ endpoint\n- æ— æ³•å†™å•å…ƒæµ‹è¯•ï¼ˆè¢« HTTP ç»‘å®šï¼‰\n- ä»£ç é‡å¤ï¼ˆå¤šä¸ª endpoint éƒ½è¦å†™ç±»ä¼¼çš„ DB æ“ä½œï¼‰",
        "operationId": "get_user_level1_level1_users__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/items/": {
      "get": {
        "summary": "Read Items",
        "description": "ä½¿ç”¨ä¾èµ–æ³¨å…¥è·å–å…¬å…±å‚æ•°\n\nâœ… æ”¹è¿›ï¼š\n- ä¸éœ€è¦é‡å¤å®šä¹‰ skip/limit/debug\n- FastAPI è‡ªåŠ¨è°ƒç”¨ common_parameters\n- å‚æ•°éªŒè¯é€»è¾‘ç»Ÿä¸€ç®¡ç†",
        "operationId": "read_items_items__get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Debug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/users/": {
      "get": {
        "summary": "Read Users",
        "description": "å¤ç”¨ç›¸åŒçš„ä¾èµ–\n\nâœ… å¤ç”¨æ€§ï¼š\n- common_parameters åœ¨å¤šä¸ª endpoint é—´å…±äº«\n- ä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰ endpoint éƒ½ç”Ÿæ•ˆ",
        "operationId": "read_users_users__get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Debug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/products/": {
      "get": {
        "summary": "Read Products",
        "description": "ä½¿ç”¨å¸¦ç±»å‹çš„ä¾èµ–\n\nâœ… IDE æ”¯æŒï¼š\n- commons.skip ä¼šè‡ªåŠ¨è¡¥å…¨\n- commons.limit æœ‰ç±»å‹æç¤º\n- æ–‡æ¡£ä¸­ä¼šæ˜¾ç¤ºå‚æ•°è¯´æ˜",
        "operationId": "read_products_products__get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Debug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/chain/items/": {
      "get": {
        "summary": "Read Items With Chain",
        "description": "ä½¿ç”¨ä¾èµ–é“¾\n\nğŸ” FastAPI è‡ªåŠ¨è§£ææ•´ä¸ªä¾èµ–é“¾ï¼š\n1. è°ƒç”¨ get_query_params()\n2. å°†ç»“æœä¼ ç»™ get_db_connection(params)\n3. å°†ç»“æœä¼ ç»™ get_repository(db)\n4. å°†ç»“æœä¼ ç»™ endpoint(repo)\n\nâœ… å¥½å¤„ï¼š\n- ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–å…³ç³»\n- ä¾èµ–è‡ªåŠ¨æŒ‰é¡ºåºåˆ›å»º\n- ä»£ç æ¸…æ™°ï¼Œå±‚æ¬¡åˆ†æ˜",
        "operationId": "read_items_with_chain_chain_items__get",
        "parameters": [
          {
            "name": "debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Debug"
            }
          },
          {
            "name": "verbose",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Verbose"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/level2/users/{user_id}": {
      "get": {
        "summary": "Get User Level2",
        "description": "âœ… Level 2 çš„æ”¹è¿›ï¼šä½¿ç”¨ä¾èµ–æ³¨å…¥\n\nğŸ” ä¾èµ–æ³¨å…¥çš„å¨åŠ›ï¼š\n\n1. **Endpoint å˜è–„äº†**ï¼š\n   - ä¸å†ç›´æ¥æ“ä½œæ•°æ®åº“\n   - åªè´Ÿè´£åè®®é€‚é…\n   - ä¸šåŠ¡é€»è¾‘åœ¨ Service å±‚\n\n2. **å¯æµ‹è¯•æ€§**ï¼š\n   - å¯ä»¥æ³¨å…¥ Mock çš„ service\n   - ä¸éœ€è¦å¯åŠ¨ HTTP æœåŠ¡å™¨\n   - å•å…ƒæµ‹è¯•å˜å¾—ç®€å•\n\n3. **å¯å¤ç”¨æ€§**ï¼š\n   - UserService å¯ä»¥åœ¨ CLI å·¥å…·ä¸­ä½¿ç”¨\n   - å¯ä»¥åœ¨ gRPC æœåŠ¡ä¸­ä½¿ç”¨\n   - ä¸è¢« HTTP å±‚ç»‘å®š\n\n4. **å¯ç»´æŠ¤æ€§**ï¼š\n   - å„å±‚èŒè´£æ¸…æ™°\n   - ä¿®æ”¹æ•°æ®åº“å®ç°ä¸å½±å“ Service\n   - ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ä¸å½±å“ Endpoint",
        "operationId": "get_user_level2_level2_users__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/level2/users/": {
      "get": {
        "summary": "List Users Level2",
        "description": "è·å–ç”¨æˆ·åˆ—è¡¨\n\nâœ… ä»£ç å¤ç”¨ï¼š\n- ç›¸åŒçš„ service ä¾èµ–\n- FastAPI è‡ªåŠ¨ç¼“å­˜\n- ä¸ä¼šé‡å¤åˆ›å»º",
        "operationId": "list_users_level2_level2_users__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/cache/demo/{user_id}": {
      "get": {
        "summary": "Demo Dependency Cache",
        "description": "æ¼”ç¤ºä¾èµ–ç¼“å­˜\n\nğŸ’¡ FastAPI çš„ä¼˜åŒ–ï¼š\n- åŒä¸€ä¸ªè¯·æ±‚ä¸­ä½¿ç”¨ Depends(get_user_service)\n- åªä¼šåˆ›å»ºä¸€æ¬¡ UserService å®ä¾‹\n- service1, service2, service3 æ˜¯åŒä¸€ä¸ªå¯¹è±¡\n\nğŸ” ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿ\n- æ€§èƒ½ä¼˜åŒ–ï¼ˆé¿å…é‡å¤åˆ›å»ºï¼‰\n- çŠ¶æ€å…±äº«ï¼ˆåŒä¸€ä¸ªè¯·æ±‚ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ï¼‰\n- äº‹åŠ¡ç®¡ç†ï¼ˆç¡®ä¿åŒä¸€ä¸ªè¯·æ±‚ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“ä¼šè¯ï¼‰",
        "operationId": "demo_dependency_cache_cache_demo__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/compare/level1-vs-level2": {
      "get": {
        "summary": "Compare Levels",
        "description": "Level 1 vs Level 2 å¯¹æ¯”æ€»ç»“\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nLevel 1 (æ²¡æœ‰ä¾èµ–æ³¨å…¥)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n@app.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    if user_id not in fake_db:\n        raise HTTPException(404)\n    user = fake_db[user_id]\n    user[\"last_accessed\"] = datetime.now().isoformat()\n    return user\n\nâŒ é—®é¢˜ï¼š\n1. Endpoint ç›´æ¥æ“ä½œæ•°æ®åº“\n2. ä¸šåŠ¡é€»è¾‘æ··åœ¨ä¼ è¾“å±‚\n3. æ— æ³•å¤ç”¨ï¼ˆCLIã€gRPC æ— æ³•ä½¿ç”¨ï¼‰\n4. éš¾ä»¥æµ‹è¯•ï¼ˆå¿…é¡»å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼‰\n5. ä»£ç é‡å¤ï¼ˆå¤šä¸ª endpoint å†™ç±»ä¼¼é€»è¾‘ï¼‰\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nLevel 2 (ä½¿ç”¨ä¾èµ–æ³¨å…¥)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n@app.get(\"/users/{user_id}\")\nasync def get_user(\n    user_id: int,\n    service: UserService = Depends(get_user_service)\n):\n    return await service.get_user(user_id)\n\nâœ… ä¼˜åŠ¿ï¼š\n1. Endpoint åªè´Ÿè´£åè®®é€‚é…\n2. ä¸šåŠ¡é€»è¾‘åœ¨ Service å±‚\n3. å¯ä»¥å¤ç”¨ï¼ˆCLIã€gRPC éƒ½èƒ½ç”¨ï¼‰\n4. æ˜“äºæµ‹è¯•ï¼ˆæ³¨å…¥ Mockï¼‰\n5. ä»£ç æ¸…æ™°ï¼ŒèŒè´£åˆ†æ˜\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•",
        "operationId": "compare_levels_compare_level1_vs_level2_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "æ ¹è·¯å¾„ - API ä¿¡æ¯",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "å¥åº·æ£€æŸ¥",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}